# üöÄ Mobile App Config Service

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[üìñ DEV_NOTES.md](docs/DEV_NOTES.md)** ‚Äî –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **[üß™ Tests README](tests/README.md)** ‚Äî E2E —Ç–µ—Å—Ç—ã –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üêô –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Docker Compose)

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è + –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö + Redis
docker-compose up -d
```

> **–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:** http://localhost:8080/config

### üèóÔ∏è –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
# –¢–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ Redis
cd deployments/db
docker-compose up -d
```

### üìù –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Database configuration
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=rootpassword
DB_NAME=sw_config

# Server configuration
SERVER_ADDR=:8080

# Redis configuration
REDIS_ADDR=localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
CACHE_TTL_SECONDS=300
```

### üñ•Ô∏è –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞

```bash
go build -o bin/sw-config-api ./cmd/sw-config-api
./bin/sw-config-api
```

### üê≥ Docker —Å–±–æ—Ä–∫–∞

```bash
docker build -t sw-config-api .
docker run -p 8080:8080 sw-config-api
```

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –æ—Ç–¥–∞—ë—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–±–∏–ª—å–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Ä—Å–∏–∏ (`appVersion`) –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (`platform`).

> **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è.**

### üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤

```text
internal/app      ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
internal/storage  ‚Äî –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
internal/service  ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ —Ä–µ–∑–æ–ª–≤–µ—Ä
internal/api      ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API —Ö–µ–Ω–¥–ª–µ—Ä—ã
internal/cache    ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Redis
```

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ –ì–∏–±–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º
- ‚ö° –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Redis
- üß™ E2E –∏ unit —Ç–µ—Å—Ç—ã
- üê≥ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Docker –∏ Docker Compose
- üèóÔ∏è Graceful shutdown
- üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üîó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
flowchart TD
    A[Application] --> B[Service (Resolver)]
    B --> C[Repositories]
    C --> D[Database]
    B --> E[Cache (Redis)]
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ E2E —Ç–µ—Å—Ç–æ–≤
cd tests
go test -v

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º URL
E2E_BASE_URL=http://localhost:8080 go test -v
```
